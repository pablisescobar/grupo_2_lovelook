<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ʆᵒᵛᵉʆᵒᵒᵏ</title>
    
        <!-- FONT AWESOME -->
        <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
            integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" />
    
        <!-- ICONIFY -->
        <script src="https://code.iconify.design/1/1.0.7/iconify.min.js"></script>
    
        <!-- Stylesheets -->
        <link rel="stylesheet" href="/css/general.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    
        <!-- SCRIPTS -->
        
        
        <script src="/js/admin.js" defer></script>
        <script src="/js/load.js"></script>
    
        <!-- FAVICON -->
        <link rel="apple-touch-icon" sizes="180x180" href="/img/icons/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/img/icons/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/img/icons/favicon-16x16.png">
        <link rel="manifest" href="/site.webmanifest">
    </head>


    <body>
        <%- include('../partials/load.ejs') %>
            <%- include('../partials/headerAdmin.ejs') %>
                <main class="admin">
                    <h2 class="mt-4 text-center">Productos</h2>
                    <div class="btn btn-success m-2">
                        <a href="/admin/products/add" class="text-white"><span class="iconify" data-icon="fluent:add-12-filled">
                            </span>Agregar Productos</a>
                    </div>
                    <div class="table-container">

                        <table class="table table-striped">
                            <thead >
                                <tr>
                                    <th>Edición</th>
                                    <th>Eliminar</th>
                                    <th>Precio</th>
                                    <th>Imagen</th>
                                    <th>Nombre</th>
                                    <th>Descuento</th>
                                    <th>Descripción</th>
                                    <th>Código</th>
                                    <th>Colores</th>
                                    <th>Talle</th>
                                    <th>Cantidad</th>
                                    <th>Temporada</th>
                                    <th>Categoría</th>
                                </tr>
                            </thead>
                            <tbody>
                                <% products.forEach(product=>{ %>
                                    <tr id="<%= product.id %>">
                                        <th>
                                            <a class="edit" role="button" href="/admin/products/edit/<%- product.id %>">
                                                <span class="iconify" data-icon="line-md:edit"></span>
                                            </a>
                                        </th>
                                        <td>
                                            <form
                                                action="/admin/products/productDelete/<%= product.id %>?_method=DELETE"
                                                method="POST">
                                                <!-- ?? -->
                                                <button class="delete" type="submit">
                                                    <span class="iconify" data-icon="feather:delete">
                                                    </span>
                                                </button>
                                            </form>

                                        </td>
                                        <td>
                                            <%= product.price ? `$${toThousand(product.price)}` : "--" %>
                                                <!-- PRECIO -->
                                        </td>
                                        <td>
                                            <%product.images.forEach(image => {%>
                                            <img class="img-value"
                                                src="/img/photos/<%= product.images.length>0? image.filename:'default.png' %>"
                                                alt="">
                                                <% }) %> 
                                            <!-- IMAGEN -->
                                        </td>
                                        <td>
                                            <%= product.name %>
                                                <!-- NOMBRE -->
                                        </td>
                                        <td>
                                            <%= product.discount ? `${product.discount}%` : "--" %>
                                                <!-- DESCUENTO -->
                                        </td>
                                        <td class="description-cell">
                                            <%= product.description ? `${product.description}` : "--" %>
                                                <!-- DESCRIPCIÓN -->
                                        </td>
                                        <td>
                                            <%=product.id %>
                                                <!-- CODIGO -->
                                        </td>
                                        <td>
                                            <% product.colors.forEach(color=>{ %>
                                                <%=color.name.toUpperCase()%>,<br>
                                                    <% }) %>
                                                        <!-- COLOR -->
                                        </td>
                                        <td>
                                            <% product.sizes.forEach(size=>{ %>
                                                <%=size.name.toUpperCase()%>
                                                    <% }) %>
                                                        <!-- TALLE -->
                                        </td>
                                        <td>
                                            <%=product.amount %>
                                                <!-- CANTIDAD -->
                                        </td>
                                        <td>
                                            <%=product.season.name %>
                                                <!-- TEMPORADA -->
                                        </td>
                                        <td>
                                            <%=product.category.name %>
                                                <!-- CATEGORÍA -->
                                        </td>
                                        
                                    </tr>
                            </tbody>
                            <% }) %>
                        </table>
                    </div>

                    <!-- <table>
                        <div class="icons-guie-scroll">
                            <div class="icon-touch">
                                <span class="iconify" data-icon="carbon:touch-interaction">
                                </span>
                            </div>
                            <div class="icon-right-table">
                                <span class="iconify" data-icon="akar-icons:arrow-right">
                                </span>
                            </div>
                        </div>
                        <tr>
                            <th scope="col">Edición</th>
                            <th scope="col">Precio</th>
                            <th scope="col">Imagen</th>
                            <th scope="col">Nombre</th>
                            <th scope="col">Descuento</th>
                            <th scope="col">Descripción</th>
                            <th scope="col">Código</th>
                            <th scope="col">Colores</th>
                            <th scope="col">Talle</th>
                            <th scope="col">Cantidad</th>
                            <th scope="col">Temporada</th>
                            <th scope="col">Categoría</th>
                            <th scope="col">Eliminar</th>
                        </tr>
                        <% products.forEach(product=>{ %>
                            <tr id="<%= product.id %>">
                                <td>
                                    <a class="edit" role="button" href="/admin/products/edit/<%- product.id %>">
                                        <span class="iconify" data-icon="line-md:edit"></span>
                                    </a>
                                </td>
                                <td>
                                    <%= product.price ? `$${toThousand(product.price)}` : "--" %>
                                      
                                </td>
                                <td>
                                    <img class="img-value" src="/img/photos/<%= product.images.length>0? product.images[0].filename:'default.png' %>" alt=""> 
                                    
                                </td>
                                <td>
                                    <%= product.name %>
                                     
                                </td>
                                <td>
                                    <%= product.discount ? `${product.discount}%` : "--" %>
                                     
                                </td>
                                <td class="description-cell">
                                    <%= product.description ? `${product.description}` : "--" %>
                                      
                                </td>
                                <td>
                                    <%=product.id %>
                                      
                                </td>
                                <td>
                                    <% product.colors.forEach(color=>{ %> 
                                    <%=color.name.toUpperCase()%>,<br>
                                    <% }) %> 
                                     
                                </td>
                                <td>
                                    <% product.sizes.forEach(size=>{ %> 
                                        <%=size.name.toUpperCase()%>
                                        <% }) %> 
                                     
                                </td>
                                <td>
                                    <%=product.amount %>
                                  
                                </td>
                                <td>
                                    <%=product.season.name %>
                                     
                                </td>
                                <td>
                                    <%=product.category.name %>
                                        
                                </td>
                                <td>
                                    <form action="/admin/products/productDelete/<%= product.id %>?_method=DELETE"
                                        method="POST">
                                      
                                        <button class="delete" type="submit">
                                            <span class="iconify" data-icon="feather:delete">
                                            </span>
                                        </button>
                                    </form>

                                </td>
                            </tr>
                            <% }) %>
                    </table> -->
                </main>

    </body>

</html>