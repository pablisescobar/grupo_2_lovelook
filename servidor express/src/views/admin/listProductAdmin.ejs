<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ʆᵒᵛᵉʆᵒᵒᵏ</title>
    
        <!-- FONT AWESOME -->
        <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
            integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" />
    
        <!-- ICONIFY -->
        <script src="https://code.iconify.design/1/1.0.7/iconify.min.js"></script>
    
        <!-- Stylesheets -->
        <link rel="stylesheet" href="/css/general.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    
        <!-- SCRIPTS -->
        
        
        <script src="/js/admin.js" defer></script>
        <script src="/js/load.js"></script>
    
        <!-- FAVICON -->
        <link rel="apple-touch-icon" sizes="180x180" href="/img/icons/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/img/icons/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/img/icons/favicon-16x16.png">
        <link rel="manifest" href="/site.webmanifest">
    </head>


    <body>
        <%- include('../partials/load.ejs') %>
            <%- include('../partials/headerAdmin.ejs') %>
                <main class="admin">
                    <h2 class="mt-4 text-center">Productos</h2>
                    <div class="btn btn-success m-2">
                        <a href="/admin/products/add" class="text-white"><span class="iconify" data-icon="fluent:add-12-filled">
                            </span>Agregar Productos</a>
                    </div>
                    <div class="table-container">

                        <table class="table table-striped">
                            <thead >
                                <tr>
                                    <th>Edición</th>
                                    <th>Eliminar</th>
                                    <th>Precio</th>
                                    <th>Imagen</th>
                                    <th>Nombre</th>
                                    <th>Descuento</th>
                                    <th>Descripción</th>
                                    <th>Código</th>
                                    <th>Colores</th>
                                    <th>Talle</th>
                                    <th>Cantidad</th>
                                    <th>Temporada</th>
                                    <th>Categoría</th>
                                </tr>
                            </thead>
                            <tbody>
                                <% products.forEach(product=>{ %>
                                    <tr id="<%= product.id %>">
                                        <th>
                                            <a class="edit" role="button" href="/admin/products/edit/<%- product.id %>">
                                                <span class="iconify" data-icon="line-md:edit"></span>
                                            </a>
                                        </th>
                                        <td>
                                            <button class="FalseButton delete">
                                                <span id="FalseButton" class="iconify" data-icon="feather:delete"></span>
                                                <form class="formDelete" id="formDelete" action="/admin/products/productDelete/<%= product.id %>?_method=DELETE" method="POST" >
                                                    <h1 class="questionDelete">
                                                        ¿Estás seguro que deseas eliminar el producto: "<%= product.name %>"?
                                                    </h1>
                                                    <input class="inputDelete" type="submit" value="Eliminar">
                                                </form>
                                            </button>
                                        </td>
                                        <td>
                                            <%= product.price ? `$${toThousand(product.price)}` : "--" %>
                                                <!-- PRECIO -->
                                        </td>
                                        <td class="imgs-admin d-flex">
                                            <%product.images.forEach(image => {%>
                                            <img class="img-value"
                                                src="/img/photos/<%= product.images.length>0? image.filename:'default.png' %>"
                                                alt="">
                                                <% }) %> 
                                            <!-- IMAGEN -->
                                        </td>
                                        <td>
                                            <%= product.name %>
                                                <!-- NOMBRE -->
                                        </td>
                                        <td>
                                            <%= product.discount ? `${product.discount}%` : "--" %>
                                                <!-- DESCUENTO -->
                                        </td>
                                        <td class="description-cell">
                                            <%= product.description ? `${product.description}` : "--" %>
                                                <!-- DESCRIPCIÓN -->
                                        </td>
                                        <td>
                                            <%=product.id %>
                                                <!-- CODIGO -->
                                        </td>
                                        <td>
                                            <% product.colors.forEach(color=>{ %>
                                                <%=color.name.toUpperCase()%><br>
                                                    <% }) %>
                                                        <!-- COLOR -->
                                        </td>
                                        <td>
                                            <% product.sizes.forEach(size=>{ %>
                                                <%=size.name.toUpperCase()%>
                                                    <% }) %>
                                                        <!-- TALLE -->
                                        </td>
                                        <td>
                                            <%=product.amount %>
                                                <!-- CANTIDAD -->
                                        </td>
                                        <td>
                                            <%=product.season.name %>
                                                <!-- TEMPORADA -->
                                        </td>
                                        <td>
                                            <%=product.category.name %>
                                                <!-- CATEGORÍA -->
                                        </td>
                                        
                                    </tr>
                            </tbody>
                            <% }) %>
                        </table>
                    </div>

                     
                </main>

    </body>

</html>